# 工作流程规则

## 进度汇报规则

### 定时汇报
- **频率：** 以最后一次发消息的时间为起点，每30分钟发送 agent 的状态（在执行什么，空闲等待指令）
- **触发：** 无需用户询问，主动执行
- **内容：**
  - 当前正在执行的任务
  - 遇到的阻塞问题
  - 等待中的指令
  - 任务的开始时间
  - 任务进度（如果可测量）

### 功能块汇报
- **触发：** 每完成一个小块功能
- **格式：** 4条消息
  1. 📝 创建了测试用例
  2. 🧪 测试结果
  3. 🔍 问题分析
  4. ✅ 结论

### Story完成汇报
- **触发：** Story 全部完成
- **内容：** 标记完成，开始下一个 Story
- **动作：** 更新 `_bmad-output/implementation-artifacts/sprint-status.yaml`

## 开发流程

### 1. 开始新Story
- [ ] 阅读Story文件
- [ ] 分析任务列表
- [ ] 规划实施顺序
- [ ] 遵循AGENTS.md的RED LIST规则

### 2. 实施开发
- [ ] 按照任务列表实施
- [ ] 遵循TDD/BDD方法（测试优先）
- [ ] 使用TDD/BDD方法（测试优先）
- [ ] 遵循命名约定和代码风格
- [ ] 单元测试覆盖每个功能

### 3. 测试验证
- [ ] 单元测试
- [ ] 集成测试
- [ ] E2E测试
- [ ] 确保所有测试通过

### 4. 代码质量
- [ ] 类型安全（TypeScript strict）
- [ ] 遵循命名约定
- [ ] 文件长度≤800行

### 5. 收尾工作
- [ ] 更新sprint status
- [ ] 更新 AGENT_STATUS.md（状态记录文件）
- [ ] 记录完成笔记
- [ ] 开始下一个Story

## 时间管理

### 响应时间
- **用户消息：** 立即响应（不等待）
- **错误修复：** 优先处理，不要陷入分析循环
- **进度汇报：** 主动定时，无需提示

### 并行任务
- **服务器运行：** 后台运行，不阻塞
- **测试执行：** 监控状态，不重复启动

## 质量标准

### 必须遵守的规则
- **RED LIST：** 严格遵循AGENTS.md中的限制
- **BDD格式：** 测试使用Given-When-Then
- **类型安全：** 禁止使用`any`类型
- **数据库：** 必须使用Drizzle ORM
- **端口配置：** 严格遵守3344端口

### 代码风格
- **命名：** camelCase（函数），PascalCase（组件），kebab-case（文件）
- **注释：** 中文注释，解释业务逻辑
- **结构：** 清晰的函数划分，单一职责

## 检查清单

### 完成Story前检查
- [ ] 所有任务完成
- [ ] 所有测试通过
- [ ] 代码质量符合标准
- [ ] AGENT_STATUS.md 已更新
- [ ] sprint status 已更新

### 开始下一个Story前检查
- [ ] 前一个Story完全完成
- [ ] Epic 1进度已更新
- [ ] 工作区已清理

---

*创建时间: 2026-02-25*
*最后更新: 2026-02-26 - 添加 AGENT_STATUS.md 引用*
