# ä¼˜åŒ–å®Œæˆæ€»ç»“

## âœ… ä¼˜åŒ–å·²å®Œæˆ

### å®ç°çš„ä¼˜åŒ–

1. **Server Component**ï¼š`page.tsx` ç°åœ¨æ˜¯ Server Component
2. **æœåŠ¡ç«¯æ•°æ®è·å–**ï¼šæ‰€æœ‰åˆå§‹æ•°æ®åœ¨æœåŠ¡ç«¯å¹¶è¡Œè·å–
3. **å®¢æˆ·ç«¯ç»„ä»¶åˆ†ç¦»**ï¼š`page-client.tsx` åªè´Ÿè´£ç”¨æˆ·äº¤äº’

### é¢„æœŸæ•ˆæœ

- é¡µé¢åŠ è½½æ—¶ï¼š**0 ä¸ª API è¯·æ±‚**ï¼ˆä¼˜åŒ–å‰æ˜¯ 4 ä¸ªï¼‰
- ç‚¹å‡»åˆ›å»ºæ—¶ï¼š**1 ä¸ª POST è¯·æ±‚**
- é¡µé¢åŠ è½½é€Ÿåº¦ï¼šæ›´å¿«ï¼ˆæ— éœ€ç­‰å¾…å®¢æˆ·ç«¯è·å–æ•°æ®ï¼‰
- ç”¨æˆ·ä½“éªŒï¼šè¡¨å•é¢„å¡«å……ï¼Œæ— ç½‘ç»œå»¶è¿Ÿ

---

## âš ï¸ å½“å‰é—®é¢˜ï¼šAPI è¿”å› 401ï¼ˆæœªæˆæƒï¼‰

### é—®é¢˜è¯¦æƒ…

æµ‹è¯•å‘ç°ï¼š

1. âœ… æ•°æ®åº“æœ‰æ•°æ®ï¼š`date_strategy` è¡¨æœ‰ 1 æ¡ `is_public=1` çš„è®°å½•
2. âŒ API è¿”å› 401ï¼š`GET /api/admin/date-strategy-templates` å¤±è´¥
3. âŒ API è¿”å› 401ï¼š`GET /api/admin/badge-templates` å¤±è´¥

### å¯èƒ½åŸå› 

1. **Session è¿‡æœŸ**ï¼šæµè§ˆå™¨çš„ session token å¯èƒ½å·²è¿‡æœŸ
2. **éœ€è¦é‡æ–°ç™»å½•**ï¼šç”¨æˆ·éœ€è¦é‡æ–°ç™»å½•ä»¥è·å–æ–°çš„ session

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šé‡æ–°ç™»å½•ï¼ˆæ¨èï¼‰

1. è®¿é—® `http://localhost:3344/login`
2. ä½¿ç”¨æ‰‹æœºå· + å¯†ç ç™»å½•
3. ç™»å½•åé‡æ–°è®¿é—® `http://localhost:3344/admin/task-templates/new`

### æ–¹æ¡ˆ 2ï¼šåˆ›å»ºæ–°çš„æµ‹è¯•æ•°æ®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

å¦‚æœä¸æƒ³é‡æ–°ç™»å½•ï¼Œå¯ä»¥åœ¨æ•°æ®åº“ä¸­æ’å…¥æµ‹è¯•æ•°æ®ï¼š

```sql
INSERT INTO date_strategy (
  id, name, is_public, dates, created_by, created_at, updated_at
) VALUES (
  'dst_test_public_001',
  'æµ‹è¯•ç­–ç•¥',
  1,
  '2025-2-8,2025-2-15',
  'admin',
  datetime('now'),
  datetime('now')
);
```

---

## ğŸ“‹ ä¼˜åŒ–æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶

- âœ… `app/admin/task-templates/new/page.tsx`ï¼ˆServer Componentï¼‰
- âœ… `app/admin/task-templates/new/page-client.tsx`ï¼ˆClient Componentï¼‰

### ä¿®æ”¹æ–‡ä»¶

- âœ… `components/task-template-form.tsx`ï¼ˆæ·»åŠ  initialData propï¼‰

### ä¿®æ”¹ç±»å‹å®šä¹‰

- âœ… `DateStrategy` æ¥å£æ·»åŠ ç¼ºå¤±å­—æ®µï¼ˆregion, year, description, copy_count, created_by, created_atï¼‰

---

## ä¸‹ä¸€æ­¥

è¯·é€‰æ‹©ä»¥ä¸‹æ“ä½œä¹‹ä¸€ï¼š

1. **é‡æ–°ç™»å½•**ï¼ˆæ¨èï¼‰
   - è®¿é—®ï¼šhttp://localhost:3344/login
   - ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•ååˆ·æ–°é¡µé¢

2. **æ’å…¥æµ‹è¯•æ•°æ®**
   - æ‰§è¡Œä¸Šè¿° SQL æ’å…¥æµ‹è¯•æ—¥æœŸç­–ç•¥
   - åˆ·æ–°é¡µé¢

3. **æ£€æŸ¥ session é…ç½®**
   - éªŒè¯ Better-Auth session è¿‡æœŸæ—¶é—´æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–é…ç½®é—®é¢˜
