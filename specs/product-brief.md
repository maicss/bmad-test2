# Product Brief: family-reward

## Executive Summary

Family Reward 是一款面向儿童的家庭行为管理游戏平台，解决家长在培养孩子习惯时的计划缺失和控制困境。通过量化日常行为、游戏化积分系统、愿望兑换（物品+互动体验），帮助家长理清培养计划，同时让孩子看到努力进度，创造透明、公平、和谐的家庭成长环境。

**核心问题**: 家长日常培养习惯缺乏计划和控制，兑换礼物时混乱，导致家庭关系紧张，家长情绪集中爆发。
**目标用户**: 主要为全职妈妈/单亲家庭，承担儿童教育主要责任。
**解决方案**: 游戏化家庭行为管理系统，量化行为+愿望兑换，创建透明、公平的成长环境。

---

## Core Vision

### Problem Statement

家长在日常培养孩子习惯时，面临以下核心问题：

1. **缺乏计划性**：口头承诺和随机奖励导致无明确目标，家长和孩子都不知道"今天该做什么"
2. **缺乏控制感**：给多了、给少了、不公平，家长情绪集中，容易爆发取消承诺
3. **缺乏量化反馈**：没有记录和可视化，孩子不知道自己"做得怎么样"，家长也不知道"这个月给了多少"
4. **沟通混乱**：愿望表达和兑现脱节，孩子想和父母互动的想法没有出口，家长不知道孩子真正想要什么

**核心痛点**：全职妈妈/单亲家庭独自承担教育责任，时间和精力有限，缺乏系统性工具辅助。

### Problem Impact

**如果问题不解决：**

- **儿童**：失去方向感，不知道努力是否有意义，容易放弃
- **家长**：情绪爆发，频繁取消承诺，和孩子关系紧张
- **家庭**：信任度下降，"妈妈说话不算数"，培养变成"权力斗争"

**最痛苦的场景**：家长已经承诺奖励，孩子不配合或没达到标准，家长情绪爆发取消之前承诺，孩子双重受伤（妈妈生气+承诺取消）。

### Why Existing Solutions Fall Short

**现有方法**：口头承诺、随机奖励、纸质记录、贴纸墙

**不足之处：**

1. **依赖家长主动**：需要家长记住和记录，全职妈妈/单亲家长时间有限
2. **缺乏孩子参与**：孩子看不到进度，没有动力，只被动等待奖励
3. **缺乏可视化**：纸质记录容易忘记或丢失，无法看到成长轨迹
4. **缺乏游戏感**：现有教育APP偏向工具属性，孩子觉得"像作业"，不感兴趣
5. **愿望管理混乱**：孩子想和父母互动的想法没有渠道，家长不知道孩子真正想要什么

### Proposed Solution

**Family Reward - 游戏化家庭行为管理平台**

**核心机制：**

1. **任务计划系统**：家长设置计划任务（循环规则、日期规则、积分值），系统根据规则自动生成全部任务
2. **积分结算系统**：好任务完成获得积分，坏任务完成扣除积分；家长可设置奖惩比例
3. **Combo激励系统**：线性combo（连续完成X次触发）、阶梯combo（每Y次奖励递增），创造"连击快感"
4. **愿望兑换系统**：孩子/家长创建愿望（物品+互动体验），进度条显示（当前积分/所需积分），家长确认兑换
5. **辅助游戏化**：签到、徽章（铜银金等级）、等级系统、道具卡（9种）、积分银行

**独特设计：**

- **愿望清单 = 孩子心声本**：不只物品，包括"和爸爸去公园"、"听妈妈讲故事"等互动体验
- **家长全参数控制**：积分值、combo规则、任务难度全由家长根据孩子情况决定
- **清晰的产品边界**：技术解决技术层面问题（如批量审批、数据报告），家庭内部问题（家长冲突、孩子腻了）不介入，避免过度复杂化
- **数据驱动模板**：后期用真实用户数据提取优秀任务模板，而非专家预设，更贴近实际使用场景

### Key Differentiators

1. **游戏感定位，而非工具感**：系统界面和体验朝向游戏化设计（combo特效、徽章升级、道具卡），孩子觉得"好玩"，不是"被妈妈用APP控制"
2. **家长全参数控制**：积分、combo、任务难度全由家长决定，系统提供模板但不强制，灵活性高
3. **清晰的边界意识**：技术解决技术层面问题（如批量审批、数据报告），家庭内部问题（家长冲突、孩子腻了）不介入，避免过度复杂化
4. **数据驱动模板**：后期用真实用户数据提取优秀任务模板，而非专家预设，更贴近实际使用场景
5. **情感连接设计**：愿望清单不仅是物品兑换，更是孩子表达想和父母互动想法的渠道，创造有温度的家庭沟通
6. **务实商业模式**：不过度商业化，前期覆盖运营成本，后期通过家庭基础费+增员费+实物周边销售盈利

---

## Technical Architecture Discussion

**Party Mode 核心洞察**（多Agent讨论总结）:

### 🎯 技术栈决策

**前端架构**：

- **主要端**：PWA Web App（可安装到桌面，支持离线）
- **辅助端**：小程序（微信/支付宝生态，内置推送通道）
- **部署策略**：Web一次开发，小程序独立适配
- **对比原生APP**：开发成本更低，获客更容易（小程序生态）

**后端架构**：

- **主框架**：Next.js 16
- **认证**：better-auth + 手机号插件 + rate limit
- **数据库**：SQLite（bun:sqlite）+ Drizzle
- **缓存**：Redis缓存任务列表、积分状态、会话数据，减少并发压力

### 🎯 核心业务场景与数据流

**用户场景**：

- **家长**：每人一个手机，主要使用小程序
- **管理员**：使用Web或小程序参与管理
- **儿童**：
  - 条件好：每人一个iPad/PAD
  - 条件不好：共用平板，6位PIN码登录，操作完毕后自动锁定
  - 15岁后：拥有手机，使用小程序

**数据流闭环**：

```
家长设置计划任务 → 批量生成全部任务 →
儿童标记完成/PIN登录 → 家长审批 →
积分结算（好任务+，坏任务-） →
累积到愿望阈值 → 家长确认兑换 → 扣除积分 → 循环
```

### 🎯 并发与性能设计

**用户量预期**：5000 DAU，高峰时段17:00-20:00

**并发策略**：

- **数据库**：SQLite作为主存储，Redis作为缓存层
- **连接池**：SQLite高并发使用连接池
- **写入量**：约10万次/天写入操作，SQLite可承受
- **查询优化**：Redis缓存任务列表、积分状态、会话数据

**推送策略**：

- **小程序**：使用内置推送通道
- **PWA**：Service Worker后台同步 + Web端轮询（备选）
- **实时性要求**：3秒延迟可接受，家长审批后儿童3秒内看到更新

### 🎯 会话与数据管理

**会话存储**：数据库会话表 + HttpOnly Cookie
**并发登录**：允许多台设备同时登录（家长场景）
**会话过期**：36小时自动刷新（Rolling Sessions）
**会话隔离**：儿童PIN登录独立会话，家长小程序独立会话

### 🎯 数据留存策略

**数据保留**：三年合规，用户可查看历史数据
**软删除**：垃圾箱7天，可恢复，7天后永久删除
**删除引导**：家长首次删除时给出说明（去哪里、保留期限）
**冷热分离**：前期不需要，按需归档历史数据

### 🎯 15岁过渡机制

**设计原则**：

- **不是硬性年龄切换**：而是基于习惯培养和诚信程度
- **系统提供建议**：低分值任务根据诚信和习惯养成情况，逐步放开
- **家长最终决定**：系统只提供能力和建议，具体操作由家长控制
- **目标**：培养儿童自主管理能力

### 🎯 设备共享与安全

**场景**：两个儿童共用一个平板，6位PIN码登录，操作完毕后自动锁定
**架构决策**：**第一期就要支持共享设备，降低家庭使用门槛（家庭成本敏感）**

**安全机制**：

- **自动锁定**：操作完毕后2分钟自动锁定
- **操作隔离**：禁止再次操作，除非重新登录
- **在线状态**：保留但不作为核心安全机制

### 🎯 成本控制

**架构决策**：

- **避免过度设计**：不采用复杂设备识别和跨设备权限管理
- **平衡性能与成本**：PWA + 小程序 vs 双端原生APP
- **务实技术选型**：SQLite + Redis 满足5000 DAU需求
- **缓存优先**：减少SQLite并发压力

## 用户旅程

### 旅程A：妈妈日常管理流程

**触发点**：早上起床/下午下班回家
`醒来 → 想到今天要做什么 → 
打开APP设置今日任务 → 
查看昨日完成情况（心情好的话多设点奖励） → 
下班回家 → 执行任务 → 
晚上睡前 → 看孩子一天的表现 → 给分/扣分/谈心`

**关键体验点**

- ✅ **快速任务设置**：上班路上设置3-5个任务
- ⚠️ **情绪影响**：心情影响任务数量和分值设置
- ✅ **进度透明**：晚上能清楚看到孩子今天完成了什么
- 📉 **冲突处理**：当"坏行为"发生时，有协商缓冲机制
- ✅ **承诺追踪**：口头承诺能被记录，避免忘掉
- ❌ **情绪预警**：暂未发现（根据现有技术架构）

**产品适配机会**

1. 批量任务模板（常见任务快速添加）
2. 情绪状态记录（妈妈可以标记"今天太累了，少设点惩罚"）
3. 积分预览功能（让孩子看到预估分值，而不是事后才知道）

### 旅程B：孩子日常行为流程

**触发点**：起床/放学回家/睡前
`起床 → 打开Pad查看今日任务 → 
完成任务（作业、练琴、做家务） → 
点击"完成"获得积分 → 
睡前 → 查看今日总积分/距离奖励还差多少 → 添加愿望到清单 → 和家长交流今天的表现`

**关键体验点**

- ✅ **即时反馈**：完成任务立刻看到星星增加
- 🎮 **游戏感**：连续打卡有combo特效、徽章升级动画
- ⚠️ **不确定性焦虑**：不知道什么算"达标"，不敢太努力
- 📉 **透明需求**：希望看到妈妈心情，预测今天的奖励力度
- ✅ **愿望自主**：可以自己添加愿望，不用完全听妈妈安排

**产品适配机会**

1. 语音任务记录（孩子可以语音说"我完成了数学作业"）
2. 进度可视化（"我已经完成了20个任务，还差5个到周末去游乐园"）

---

## 画像整合与差异化机会

### 关键洞察总结

**1. 场景化功能机会**
- **情绪预警功能**：
  - 记录家长心情
  - 提醒："检测到3天连续坏行为，且妈妈今日心情指数为30/100，建议：先不要惩罚，或等妈妈心情好再沟通"

**2. 游戏化深度调整**

- **低年龄段**：强调即时反馈、可爱动画、简单UI
- **高年龄段**：加入排行榜、成就系统、社交分享
- **多子女家庭**：兄弟姐妹积分对比，但强调个人成长而非横向攀比

---
